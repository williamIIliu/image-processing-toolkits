# å›¾ç‰‡å¤„ç† MCP æœåŠ¡å™¨

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å›¾ç‰‡å¤„ç†MCP (Model Context Protocol) æœåŠ¡å™¨ï¼Œæä¾›äº†ä¸°å¯Œçš„å›¾ç‰‡å¤„ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬è£å‰ªã€æ—‹è½¬ã€è°ƒæ•´å¤§å°ã€å¯¹æ¯”åº¦è°ƒæ•´ç­‰ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ðŸŽ¨ åŸºç¡€å›¾ç‰‡å¤„ç†
- **è£å‰ªå›¾ç‰‡** - ç²¾ç¡®è£å‰ªåˆ°æŒ‡å®šåŒºåŸŸ
- **æ—‹è½¬å›¾ç‰‡** - ä»»æ„è§’åº¦æ—‹è½¬ï¼Œæ”¯æŒç”»å¸ƒæ‰©å±•
- **è°ƒæ•´å¤§å°** - æ™ºèƒ½ç¼©æ”¾ï¼Œå¯ä¿æŒå®½é«˜æ¯”
- **ç¿»è½¬å›¾ç‰‡** - æ°´å¹³æˆ–åž‚ç›´ç¿»è½¬

### ðŸŒˆ å›¾ç‰‡å¢žå¼º
- **å¯¹æ¯”åº¦è°ƒæ•´** - å¢žå¼ºæˆ–å‡å¼±å›¾ç‰‡å¯¹æ¯”åº¦
- **äº®åº¦è°ƒæ•´** - è°ƒèŠ‚å›¾ç‰‡æ˜Žæš—ç¨‹åº¦
- **é¥±å’Œåº¦è°ƒæ•´** - æŽ§åˆ¶è‰²å½©é¥±å’Œåº¦ï¼Œæ”¯æŒç°åº¦è½¬æ¢

### ðŸŽ­ æ»¤é•œæ•ˆæžœ
- **æ¨¡ç³Šæ•ˆæžœ** (BLUR)
- **ç»†èŠ‚å¢žå¼º** (DETAIL)
- **è¾¹ç¼˜å¢žå¼º** (EDGE_ENHANCE, EDGE_ENHANCE_MORE)
- **æµ®é›•æ•ˆæžœ** (EMBOSS)
- **è¾¹ç¼˜æ£€æµ‹** (FIND_EDGES)
- **é”åŒ–** (SHARPEN)
- **å¹³æ»‘** (SMOOTH, SMOOTH_MORE)

### ðŸ”§ å®žç”¨å·¥å…·
- **æ ¼å¼è½¬æ¢** - æ”¯æŒ JPEG, PNG, BMP, TIFF, WEBP
- **ç¼©ç•¥å›¾ç”Ÿæˆ** - å¿«é€Ÿç”ŸæˆæŒ‡å®šå°ºå¯¸ç¼©ç•¥å›¾
- **æ°´å°æ·»åŠ ** - æ–‡å­—æ°´å°ï¼Œæ”¯æŒå¤šç§ä½ç½®å’Œé€æ˜Žåº¦
- **å›¾ç‰‡ä¿¡æ¯èŽ·å–** - è¯¦ç»†çš„å…ƒæ•°æ®å’ŒEXIFä¿¡æ¯

### âš¡ æ€§èƒ½ä¼˜åŒ–
- **æ™ºèƒ½ç¼“å­˜** - è‡ªåŠ¨ç¼“å­˜å¸¸ç”¨å›¾ç‰‡ï¼Œæå‡å¤„ç†é€Ÿåº¦
- **å†…å­˜ç®¡ç†** - ç›‘æŽ§å†…å­˜ä½¿ç”¨ï¼Œè‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜
- **å¹¶å‘å¤„ç†** - æ”¯æŒå¤šçº¿ç¨‹å¹¶å‘å¤„ç†
- **é”™è¯¯å¤„ç†** - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

## å®‰è£…ä¾èµ–

åœ¨ä½¿ç”¨å›¾ç‰‡å¤„ç†æœåŠ¡å™¨ä¹‹å‰ï¼Œéœ€è¦å®‰è£…ä»¥ä¸‹ä¾èµ–åŒ…ï¼š

```bash
pip install Pillow opencv-python numpy psutil mcp
```

æˆ–è€…ä½¿ç”¨é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼š

```bash
pip install -r requirements.txt
```

## å¯ç”¨å·¥å…·

### 1. crop-image - è£å‰ªå›¾ç‰‡
```json
{
  "file_path": "path/to/image.jpg",
  "x": 100,
  "y": 100,
  "width": 200,
  "height": 150,
  "output_path": "path/to/cropped.jpg"  // å¯é€‰
}
```

### 2. rotate-image - æ—‹è½¬å›¾ç‰‡
```json
{
  "file_path": "path/to/image.jpg",
  "angle": 45,
  "expand": true,  // æ˜¯å¦æ‰©å±•ç”»å¸ƒ
  "output_path": "path/to/rotated.jpg"  // å¯é€‰
}
```

### 3. resize-image - è°ƒæ•´å¤§å°
```json
{
  "file_path": "path/to/image.jpg",
  "width": 800,
  "height": 600,
  "maintain_aspect": true,  // ä¿æŒå®½é«˜æ¯”
  "resample": "LANCZOS",    // LANCZOS, BILINEAR, BICUBIC, NEAREST
  "output_path": "path/to/resized.jpg"  // å¯é€‰
}
```

### 4. adjust-contrast - è°ƒæ•´å¯¹æ¯”åº¦
```json
{
  "file_path": "path/to/image.jpg",
  "factor": 1.5,  // >1å¢žå¼º, <1å‡å¼±, 1.0åŽŸå§‹
  "output_path": "path/to/contrast.jpg"  // å¯é€‰
}
```

### 5. adjust-brightness - è°ƒæ•´äº®åº¦
```json
{
  "file_path": "path/to/image.jpg",
  "factor": 1.2,  // >1å¢žäº®, <1å˜æš—, 1.0åŽŸå§‹
  "output_path": "path/to/bright.jpg"  // å¯é€‰
}
```

### 6. adjust-saturation - è°ƒæ•´é¥±å’Œåº¦
```json
{
  "file_path": "path/to/image.jpg",
  "factor": 0.8,  // >1å¢žå¼º, <1å‡å¼±, 0ç°åº¦, 1.0åŽŸå§‹
  "output_path": "path/to/saturated.jpg"  // å¯é€‰
}
```

### 7. apply-filter - åº”ç”¨æ»¤é•œ
```json
{
  "file_path": "path/to/image.jpg",
  "filter_type": "BLUR",  // è§ä¸Šæ–¹æ»¤é•œåˆ—è¡¨
  "output_path": "path/to/filtered.jpg"  // å¯é€‰
}
```

### 8. flip-image - ç¿»è½¬å›¾ç‰‡
```json
{
  "file_path": "path/to/image.jpg",
  "direction": "horizontal",  // horizontal, vertical
  "output_path": "path/to/flipped.jpg"  // å¯é€‰
}
```

### 9. convert-format - è½¬æ¢æ ¼å¼
```json
{
  "file_path": "path/to/image.png",
  "format": "JPEG",
  "quality": 95,  // JPEGè´¨é‡ 1-100
  "output_path": "path/to/converted.jpg"  // å¯é€‰
}
```

### 10. get-image-info - èŽ·å–å›¾ç‰‡ä¿¡æ¯
```json
{
  "file_path": "path/to/image.jpg"
}
```

### 11. create-thumbnail - åˆ›å»ºç¼©ç•¥å›¾
```json
{
  "file_path": "path/to/image.jpg",
  "size": 128,  // æœ€å¤§å°ºå¯¸
  "output_path": "path/to/thumbnail.jpg"  // å¯é€‰
}
```

### 12. add-watermark - æ·»åŠ æ°´å°
```json
{
  "file_path": "path/to/image.jpg",
  "watermark_text": "ç‰ˆæƒæ‰€æœ‰",
  "position": "bottom-right",  // top-left, top-right, bottom-left, bottom-right, center
  "opacity": 0.7,  // é€æ˜Žåº¦ 0.0-1.0
  "font_size": 36,
  "output_path": "path/to/watermarked.jpg"  // å¯é€‰
}
```

## ä½¿ç”¨ç¤ºä¾‹

### å¯åŠ¨æœåŠ¡å™¨
```bash
python tools/image_processor.py
```

### æµ‹è¯•åŠŸèƒ½
```bash
python test_image_processor.py
```

### ç®€å•æµ‹è¯•
```bash
python simple_test.py
```

## æŠ€æœ¯ç‰¹æ€§

### ç¼“å­˜æœºåˆ¶
- è‡ªåŠ¨ç¼“å­˜æœ€è¿‘ä½¿ç”¨çš„å›¾ç‰‡
- å†…å­˜ä½¿ç”¨çŽ‡ç›‘æŽ§
- å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜
- æ”¯æŒæ‰‹åŠ¨æ¸…ç†ç¼“å­˜

### é”™è¯¯å¤„ç†
- å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯åé¦ˆ
- è‡ªåŠ¨æ¢å¤å’Œé‡è¯•æœºåˆ¶

### æ€§èƒ½ä¼˜åŒ–
- å¤šçº¿ç¨‹å¹¶å‘å¤„ç†
- æ™ºèƒ½å†…å­˜ç®¡ç†
- é«˜æ•ˆçš„å›¾ç‰‡å¤„ç†ç®—æ³•
- æ”¯æŒå¤§æ–‡ä»¶å¤„ç†

## æ–‡ä»¶ç»“æž„

```
tools/
â”œâ”€â”€ image_processor.py      # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ weather.py             # å¤©æ°”æœåŠ¡å™¨
â”œâ”€â”€ demo.py               # æ¼”ç¤ºæ–‡ä»¶
â””â”€â”€ server.py             # å…¶ä»–æœåŠ¡å™¨

test_image_processor.py    # å®Œæ•´åŠŸèƒ½æµ‹è¯•
simple_test.py            # ç®€å•å¯¼å…¥æµ‹è¯•
pyproject.toml            # é¡¹ç›®é…ç½®
README_image_processor.md  # æœ¬æ–‡æ¡£
```

## æ³¨æ„äº‹é¡¹

1. **ä¾èµ–å®‰è£…**: ç¡®ä¿æ‰€æœ‰ä¾èµ–åŒ…éƒ½å·²æ­£ç¡®å®‰è£…
2. **æ–‡ä»¶è·¯å¾„**: ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹äºŽå½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„
3. **å›¾ç‰‡æ ¼å¼**: æ”¯æŒå¸¸è§çš„å›¾ç‰‡æ ¼å¼ (JPEG, PNG, BMP, TIFF, WEBP)
4. **å†…å­˜ä½¿ç”¨**: å¤„ç†å¤§å›¾ç‰‡æ—¶æ³¨æ„å†…å­˜ä½¿ç”¨æƒ…å†µ
5. **è¾“å‡ºè·¯å¾„**: å¦‚æžœä¸æŒ‡å®šè¾“å‡ºè·¯å¾„ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå¸¦åŽç¼€çš„æ–‡ä»¶å

## æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

1. **PILå¯¼å…¥å¤±è´¥**
   ```bash
   pip install Pillow --upgrade
   ```

2. **OpenCVå¯¼å…¥å¤±è´¥**
   ```bash
   pip install opencv-python --upgrade
   ```

3. **å†…å­˜ä¸è¶³**
   - å‡å°‘ç¼“å­˜å¤§å°
   - å¤„ç†è¾ƒå°çš„å›¾ç‰‡
   - æ‰‹åŠ¨æ¸…ç†ç¼“å­˜

4. **å­—ä½“åŠ è½½å¤±è´¥**
   - æ°´å°åŠŸèƒ½ä¼šè‡ªåŠ¨å›žé€€åˆ°é»˜è®¤å­—ä½“
   - å¯ä»¥æ‰‹åŠ¨æŒ‡å®šå­—ä½“è·¯å¾„

## æ‰©å±•åŠŸèƒ½

è¿™ä¸ªå›¾ç‰‡å¤„ç†æœåŠ¡å™¨é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå¯ä»¥è½»æ¾æ·»åŠ æ–°çš„åŠŸèƒ½ï¼š

1. **æ–°å¢žæ»¤é•œ**: åœ¨ `apply_filter` å‡½æ•°ä¸­æ·»åŠ æ–°çš„æ»¤é•œç±»åž‹
2. **è‡ªå®šä¹‰å¤„ç†**: åˆ›å»ºæ–°çš„å¤„ç†å‡½æ•°å¹¶æ³¨å†Œä¸ºå·¥å…·
3. **æ ¼å¼æ”¯æŒ**: æ‰©å±•æ”¯æŒçš„å›¾ç‰‡æ ¼å¼
4. **æ‰¹é‡å¤„ç†**: æ·»åŠ æ‰¹é‡å¤„ç†åŠŸèƒ½

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## è´¡çŒ®

æ¬¢è¿Žæäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼
